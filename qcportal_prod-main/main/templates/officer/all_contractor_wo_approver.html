{% extends 'fqp/wo_approver/approver_base.html' %}
{% load static %}
{% block pagetitle %} Create Work Order {% endblock pagetitle %}
{% load cart %}
{% block body %}
<style>
     .ed-tableinfo-block .dataTables_length {
      display: block;
  }

  .ed-tableinfo-block .dataTables_paginate span .paginate_button.current {
      background: #e5e9ed;
      color: #fff;
      border-color: #1b1c1c;
  }
</style>


    
    <div class="ed-information">
        <div class="card ed-card-block">
          <div class="ed-card-inner">
            <div class="card-header">
              <h2>
                All Approved Contractor
              </h2>
            </div>
            <div class="card-body">
              <div class="ed-tableinfo-block">
                <div class="table-responsive">

    <div class="panel panel-default">
        <!-- <div class="panel-heading">Panel Heading</div>
        <div class="panel-body">Panel Content</div> -->
            <table class="table table-bordered table-striped display text-center" id="all_contractor_wo_approver">
                <thead class="table-dark" style="font-size: 15px;">
                    <tr>
                        <th style="width:5%">
                            S No.
                        </th>
                        <th style="width:30%">
                            Name Of Company
                        </th>
                        <th style="width: 30%">
                            Name of Authorized Person
                        </th>
                        <th style="width:15%">
                            Valid  Up To
                        </th>
                        <th style="width:15%">
                          Registration Date
                        </th>
                        <!-- <th style="width:20%">
                          Contractor Class
                      </th> -->
                      <th style="width:20%">
                        Contact Number
                    </th>
                         
                  
                    <!-- <th style="width:20%">
                      View
                  </th> -->
                  <th style="width:1%;color: white; ">
                    DGM(W&P) Status </th>

                    <th style="width:1% ;color: white; ">
                    DGM(Finance) Status </th>

                    <th style="width:1% ;color: white; ">
                        GM(works) Status </th>
    

                    </tr>
                </thead>
                <tbody>
                  {% for data in data %}

                  <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{data.CompanyName_E}}</td>
                    <td>{{data.Authorised_person_E}}</td>
                    <!-- <td>{{data.Uploaded_Date}}</td> -->
                       <td>{{data|last_date:doc|date:"d-M-Y"}}</td>
                       <td>{{data.Uploaded_Date|date:"d-M-Y"}}</td>
                    <!--  <td>{{data.Uploaded_Date|date:"d-M-Y"}}</td>-->
                    <td>{{data.ContactNo}}</td>
                      <!-- <td class="text-center"><a href="/vendor_cgm_evaluate_view/{{data.User_Id}}"> View </a></td> -->
                      {% if data.work_approval == 1  %}
                      <td><span class="btn btn-success btn-sm">Approve</span></td>
                          {% elif data.work_approval == 2  %}
                          <td><span class="btn btn-danger btn-sm">Rejected</span></td>
                         {% elif data.work_approval == 0  %}
                          <td><span class="btn btn-warning btn-sm">Pending</span></td>

                          {% else %}
                          <td><span class="btn btn-success btn-sm">Approved from Anuband</span></td>
                          {% endif %}

  
                          {% if data.finance_approval == 1  %}
                          <td><span  class="btn btn-success btn-sm">Approve</span></td>
                          {% elif data.finance_approval == 2  %}
                          <td><span  class="btn btn-danger btn-sm">Rejected</span></td>
                          
                          {% elif data.finance_approval == 0  %}
                          <td><span  class="btn btn-warning btn-sm">Pending</span></td>

                          {% else %}
                          <td><span  class="btn btn-success btn-sm">Approved from Anuband</span></td>
                          {% endif %}

                          {% if data.cgm_approval == 1  %}
                          <td><span  class="btn btn-success btn-sm">Approve</span></td>
                          {% elif data.cgm_approval == 2  %}
                          <td><span class="btn btn-danger btn-sm">Rejected</span></td>
                          
                          {% else %}
                          <td><span  class="btn btn-warning btn-sm">Pending</span></td>
                          {% endif %}


                    </tr>

                    {%  endfor %}
                
                  </tbody>
              </table>
           </div>
                     

    </div>
</div>
            </div>
          </div>
        </div>
    </div>
    

<script>
    $(document).ready( function () {
    $('#all_contractor_wo_approver').DataTable();
} );
</script>
{% endblock body %}